<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Leave Application Portal</title>
    <link rel="stylesheet" href="statics/css/student_css1.css"></style>
</head>
<body>
    <header class="header">
        <a href="student_dash.html" class="back-arrow">‚Üê</a>
        <h1>Student Leave Application Portal</h1>
    </header>

    <nav class="sidebar">
        <div class="user-profile">
            <div class="profile-pic">üë§</div>
            <span>Username</span>
        </div>
        <ul class="menu-list">
            <li><a href="student_dash.html" ><span class="menu-icon">üè†</span>Dashboard</a></li>
            <li><a href="student_result.html"><span class="menu-icon">üìä</span> Check Status</a></li>
            <li><a href="login_student.html"><span class="menu-icon">üö™ </span> Logout</a></li>
        </ul>
    </nav>

    <main class="main-content">
        <div class="form-header">
            <div class="form-icon">üìù</div>
            <h2>Leave Application Form</h2>
        </div>

        <form class="form-container">
            <div class="form-row">
                <div class="form-group">
                    <label for="regNo">Reg. No:</label>
                    <input type="text" id="regNo" name="regNo" required>
                </div>
                <div class="form-group">
                    <label for="dept">Department:</label>
                    <input type="text" id="dept" name="dept" required>
                </div>
                <div class="form-group">
                    <label for="year">Year:</label>
                    <input type="text" id="year" name="year" required>
                </div>
            </div>

            <div class="form-group" style="margin-bottom: 1.5rem;">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="fromDate">From Date:</label>
                    <input type="date" id="fromDate" name="fromDate" required>
                </div>
                <div class="form-group">
                    <label for="toDate">To Date:</label>
                    <input type="date" id="toDate" name="toDate" required>
                </div>
            </div>

            <div class="form-group" style="margin-bottom: 1.5rem;">
                <label for="category">Permission Category:</label>
                <select id="category" name="category" required>
                    <option value="">Select Category</option>
                    <option value="Leave">Leave</option>
                    <option value="OD">On Duty (OD)</option>
                    <option value="Discipline">Discipline</option>
                    <option value="Report">Report</option>
                    <option value="Apology">Apology</option>
                    <option value="GatePass">Gate Pass</option>
                </select>
            </div>

            <div class="form-group" style="margin-bottom: 2rem;">
                <label for="reason">Reason:</label>
                <textarea id="reason" name="reason" required></textarea>
            </div>

            <button type="submit" class="submit-btn">Submit</button>
        </form>
    </main>
    <script>
        document.querySelector('form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                regNo: document.getElementById('regNo').value,
                name: document.getElementById('name').value,
                dept: document.getElementById('dept').value,
                year: document.getElementById('year').value,
                fromDate: document.getElementById('fromDate').value,
                toDate: document.getElementById('toDate').value,
                category: document.getElementById('category').value,
                reason: document.getElementById('reason').value
            };
            
            try {
                const response = await fetch('/student/student_leave.html?' + new URLSearchParams(formData));
                const data = await response.json();
                
                if (data.success) {
                    alert('Leave application submitted successfully!');
                    window.location.href = 'student_dash.html';
                } else {
                    alert('Error submitting leave application: ' + data.error);
                }
            } catch (error) {
                alert('Error submitting leave application. Please try again.');
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
</body>
</html>